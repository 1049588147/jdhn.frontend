<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script type="text/javascript" src="dist/jquery-2.1.3.min.js" ></script>
		 <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	</head>
	<body>
		<script>
				$(function(){
					$.ajax({  
			            type : "post",  
			            dataType : "json",  
			            url : "http://api.jdhn.top/home/share",
			            data : {  
			                url : window.location.href
						},
			            complete : function() {  
			            },  
			            success : function(msg) {  
//			                console.log(msg)
			                var  data=msg.data
			                if (msg.code==1) {  
			                    wx.config({  
			                        debug : true, //  
			                        appId : data.appId, // 必填，公众号的唯一标识  
			                        timestamp :data.timestamp, // 必填，生成签名的时间戳  
			                        nonceStr : data.nonceStr, // 必填，生成签名的随机串  
			                        signature : data.signature,// 必填，签名，见附录1  
			                        jsApiList : [ 'onMenuShareTimeline',
			                                'onMenuShareAppMessage', 'showOptionMenu' ]  
			                    // 必填，需要使用的JS接口列表，所有JS接口列表见附录2  
			                    });  
			                }  
			            },  
			        });  
			     
				    var shareTitle = "法国游已经近在咫尺了，是朋友就帮我一把吧！";  
				    var shareDesc = "法国游已经近在咫尺了，是朋友就帮我一把吧！";  
				    var shareImg = "http://c.csdnimg.cn/jifen/images/xunzhang/xunzhang/bokezhuanjiamiddle.png";  
				    var url = "http://www.jdhn.top";  
				    wx.ready(function() {  
				        share();  
				    });  
				    function share() {  
				        wx.showOptionMenu();  
				        wx.onMenuShareTimeline({  
				            title : shareTitle, // 分享标题  
				            link : url, // 分享链接  
				            imgUrl : shareImg,  
				            desc : shareDesc, // 分享描述  
				            success : function() {  
				            }  
				        });  
				        wx.onMenuShareAppMessage({  
				            title : shareTitle, // 分享标题  
				            link : url, // 分享链接  
				            imgUrl : shareImg,  
				            desc : shareDesc, // 分享描述  
				            success : function() {  
				            }  
				        });  
				        
				        wx.onMenuShareQQ({
					    title: shareTitle, // 分享标题
					    desc: shareDesc, // 分享描述
					    link: url, // 分享链接
					    imgUrl: shareImg, // 分享图标
					    success: function () { 
					       // 用户确认分享后执行的回调函数
					    },
					    cancel: function () { 
					       // 用户取消分享后执行的回调函数
					    }
					});
				    }  
				});
				
		</script>
	</body>
</html>
